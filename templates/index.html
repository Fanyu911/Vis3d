<!DOCTYPE html>
{% load static %}

<html>
    <!--  meta tag -->
    <meta charset="UTF-8">
    <!--  css + js -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/my-css.css' %}">

    <script src="{% static 'js/loadfile.js' %}"></script>

    <!--mpld3 script-->
    <script type="text/javascript" src="{% static 'js/d3.v5.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/mpld3.v0.5.1.js' %}"></script>

<head>
    <title>3D Date Visualization</title>
</head>

<body>

    <form method="post" enctype="multipart/form-data" action="/upload/">
        {% csrf_token %}
        <input type="file" name="file" value="上传文件">
        <button type="submit" id="btn">提交</button>
    </form>


    <button id="show" >Show</button>
    <button id="change" >Change</button>
    <button id="clean" >Clean</button>
    <button id="changeimage" >Changeimage</button>


    <div id="fig1" >graph1</div>

     <div id="file_contents">
            <!-- This is empty, we will use jQuery to add text later -->
     </div>





    <!--Script-->
    <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
    <script type="text/javascript">
        mpld3.draw_figure("fig1", {{graph1 | safe}});
        var svg = d3.select("svg").attr("width", 600)



        $("#show").click(function(){
            mpld3.draw_figure("fig1", {{graph1 | safe}});
        });

        $("#clean").click(function(){
            $('#fig1').empty();
            $.ajax({
            url:"/change/",
            type:"GET",
            success:function (data) {
                mpld3.draw_figure("fig2", data);

                }
            });
        });

        $("#change").on("click", function () {
            $.ajax({
            url:"/change/",
            type:"GET",
            success:function (data) {
                mpld3.draw_figure("fig2", data);
                }
            });
        });

         $("#changeimage").on("click", function () {
            var svg = d3.select("svg").attr("width", 200)
         });
    </script>
</body>
</html>
