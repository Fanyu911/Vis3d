<!DOCTYPE html>

{% load static %}

<html>
    <!--  meta tag -->
    <meta charset="UTF-8">
    <!--  css + js -->
    <link type="text/css" href="{% static 'css/bootstrap.css' %}" rel="stylesheet">
    <link type="text/css" href="{% static 'css/mycss.css' %}" rel="stylesheet">
    <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/d3.v5.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/mpld3.v0.5.1.js' %}"></script>

<head>
    <title>3D Date Visualization</title>
</head>

<body class="container">
    <h2>3D Date Visualization Tool</h2>

    <h4>Upload Your File</h4>
    <form class="form-inline" role="form" method="post" enctype="multipart/form-data" action="/upload/">
        <div class="form-group">
        {% csrf_token %}
            <h4>File</h4>
            <input type="file" id="inputFile" name="file" style="display:none" onchange="changeAgentContent()" />
            <input type="text" value="" disabled id="inputFileAgent" />
            <input type="button" onclick="document.getElementById('inputFile').click()" value="Browse..." />
        </div>
        <div class="form-group">
            <h4>Axis</h4>
            <input type="text" name="axis" value="" placeholder="Select axis">
        </div>
        <div class="form-group">
            <h4>Upload</h4>
            <button type="submit" class="btn" id="btn">upload</button>
        </div>
    </form>



    <h4>Function</h4>
    <button id="show" class="btn">Show</button>
    <button id="clean" class="btn">Clean</button>
    <button id="backchange" class="btn">Change</button>
    <button id="changeimage" class="btn">Changeimage</button>
    <button id="save" class="btn">Save</button>

    <h4>Show</h4>
    <p id="text">这是段落中的 </p>
    <div id="fig1" >graph1</div>
    <input type="range">

    <!--Script-->
    <script type="text/javascript" src="{% static 'js/myjs.js' %}"></script>

    <script type="text/javascript">
        mpld3.draw_figure("fig1", {{graph1 | safe}});


        //save as pdf
        $("#save").click(function(){
            $.ajax({
                url:"/save/",
                type:"GET",
                success:function (data) {
                    alert(data.text);

                    }
                });
        });

        //show index page
        $("#show").click(function(){
            mpld3.draw_figure("fig1", {{graph1 | safe}});
        });

        //clean show
        $("#clean").click(function(){
            $('#fig1').empty();
        });


        $("#backchange").on("click", function () {
            $.ajax({
            url:"/change/",
            type:"GET",
            success:function (data) {
                $('#fig1').empty();
                mpld3.draw_figure("fig1", data);
                }
            });
        });

         $("#changeimage").on("click", function () {
            var svg = d3.select("svg").attr("width", 200)
         });
    </script>

</body>
</html>
