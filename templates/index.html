<!DOCTYPE html>
{% load static %}


<html>
<head>
    <meta charset="UTF-8">
    <title>Client-Side File Example</title>

    <style>
        body {
            font-family: sans-serif;
        }

        #file_contents {
            font-size: 10px;
            padding: 5px;
        }

        .header {
            font-weight: 700;
        }

        #upload {
            margin-bottom: 20px;
        }
    </style>

    <!-- Include jQuery -->
    <script src="{% static 'js/jquery-3.5.1.min.js' %}"></script>


    <!-- Main file processing script -->
    <script>
        // This function is used to process files - it calls 'loadAsText'
        function readFiles(event) {
            var fileList = event.target.files;

            for (var i=0; i < fileList.length; i++) {
                loadAsText(fileList[i]);
            }
        }

        // This function converts newline characters into <br /> characters, for HTML output only
        function nl2br(str, is_xhtml) {
            var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br />' : '<br>';
            return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1'+ breakTag +'$2');
        }

        // This function reads a text file into a variable then displays it in the webpage
        function loadAsText(theFile) {
            var reader = new FileReader();

            reader.onload = function(loadedEvent) {
                // loadedEvent.target.result has the loaded text file

                // Clear all text in <div id="file_contents">
                $("#file_contents").empty()

                // Convert plaintext to HTML, you won't need to do this when you process the data
                var file_content_str = nl2br(loadedEvent.target.result);

                // Add the file contents to <div id="file_contents"
                $("#file_contents").append(file_content_str);
            }

            reader.readAsText(theFile);
        }
        //change image
        function changeimage() {

        }

    </script>
</head>
<body>
    <div id="upload" >
        <h2 class="header">Upload File</h2>
        <form name="uploadForm">
            <div>
                <input type="file" onchange="readFiles(event)">
            </div>
        </form>
    </div>
            <button onclick="changeimage()">Change</button>
    <div id="output">
        <h2 class="header">File Contents</h2>

        <div id="file_contents">
            <!-- This is empty, we will use jQuery to add text later -->
        </div>
    </div>
</body>
</html>
