{% extends 'base.html' %}
{% load static %}

{% block title_block %}
    Easy Mode
{% endblock %}

{% block body_block %}

    <h4>Upload Your File</h4>
    <form class="form-inline" role="form" method="post" enctype="multipart/form-data" action="/upload/">
        <div class="form-group">
        {% csrf_token %}
            <h4>File</h4>
            <input type="file" id="inputFile" name="file" style="display:none" onchange="changeAgentContent()" />
            <input type="text" value="" disabled id="inputFileAgent" />
            <input type="button" onclick="document.getElementById('inputFile').click()" value="Browse..." />
        </div>
        <div class="form-group">
            <h4>Axis</h4>
            <input type="text" name="axis" list="typelist" value="" placeholder="Select axis">
            <datalist id="typelist">
　　             <option>x</option>
　　             <option>y</option>
                 <option>z</option>
            </datalist>
        </div>


        <div class="form-group">
            <h4>Value</h4>
            <input type="number" name="values" value="" min="-100.000" max="100.000" step="0.001">
        </div>
        <div class="form-group">
            <h4>Upload</h4>
            <button type="submit" class="btn" id="btn">upload</button>
        </div>
    </form>

    <div>
        <h4>Information</h4>
         <h5>{{info}}</h5>
    </div>


    <h1 >实时监测input中值的变化</h1>
        <input type="range" class="custom-range" id="slider" min="{{info.zmin}}" max="{{info.zmax}}" step="{{info.step}}">
        <div id="result"></div>

    <h4>Function</h4>
    <button id="show" class="btn">Show</button>
    <button id="clean" class="btn">Clean</button>
    <button id="backchange" class="btn">Change</button>
    <button id="changeimage" class="btn">Changeimage</button>
    <button id="save" class="btn">Save</button>

    <h4>Show</h4>
    <div id="fig1">graph1</div>






    <!--Script-->
    <script type="text/javascript" src="{% static 'js/myjs.js' %}"></script>

    <script type="text/javascript">
       //mpld3.draw_figure("fig1", {{graph1 | safe}});


        var jsl={{jsl}};

        //save as pdf
        $("#save").click(function(){
            $.ajax({
                url:"/save/",
                type:"GET",
                success:function (data) {
                    alert(data.text);

                    }
                });
        });

        //show index page
        $("#show").click(function(){
            mpld3.draw_figure("fig1", {{graph1 | safe}});
        });

        //clean show
        $("#clean").click(function(){
            $('#fig1').empty();
        });


        $("#backchange").on("click", function () {
            $.ajax({
            url:"/change/",
            type:"GET",
            success:function (data) {
                $('#fig1').empty();
                mpld3.draw_figure("fig1", data);
                }
            });
        });

         $("#changeimage").on("click", function () {
            $('#fig1').empty();
            mpld3.draw_figure("fig1", {{graph2 | safe}});
         });
        //滑块功能
         $(function(){
            $('#slider').bind('input propertychange', function() {
                $('#result').html($(this).val());



                if ($('#slider').val()==jsl[0]){
                    $('#fig1').empty();
                    mpld3.draw_figure("fig1", {{graph0 | safe}});
                 } else if($('#slider').val()==jsl[1]){
                    $('#fig1').empty();
                    mpld3.draw_figure("fig1", {{graph1 | safe}});
                 } else if($('#slider').val()==jsl[2]){
                    $('#fig1').empty();
                    mpld3.draw_figure("fig1", {{graph2 | safe}});
                 } else if($('#slider').val()==jsl[3]){
                    $('#fig1').empty();
                    mpld3.draw_figure("fig1", {{graph3 | safe}});
                 }else if($('#slider').val()==jsl[4]){
                    $('#fig1').empty();
                    mpld3.draw_figure("fig1", {{graph4 | safe}});
                 } else{
                    $('#fig1').empty();
                    mpld3.draw_figure("fig1", {{graph5 | safe}});
                 }
                });
             $('#slider').on
          });

    </script>


{% endblock %}
